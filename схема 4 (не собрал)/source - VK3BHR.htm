<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage" style="height: auto;"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<script async="" src="source%20-%20VK3BHR_files/analytics.js"></script><script type="text/javascript">/* Copyright 2008 Google. */ (function() { (function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})(); })()
</script>
<link rel="shortcut icon" type="image/x-icon" href="https://www.google.com/images/icons/product/sites-16.ico">
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/40be54/system/app/images/apple-touch-icon.png" type="image/png">
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { function d(a){return document.getElementById(a)}window.byId=d;function g(a){return a.replace(/^\s+|\s+$/g,"")}window.trim=g;var h=[],k=0;window.JOT_addListener=function(a,b,c){var f=new String(k++);a={eventName:a,handler:b,compId:c,key:f};h.push(a);return f};window.JOT_removeListenerByKey=function(a){for(var b=0;b<h.length;b++)if(h[b].key==a){h.splice(b,1);break}};window.JOT_removeAllListenersForName=function(a){for(var b=0;b<h.length;b++)h[b].eventName==a&&h.splice(b,1)};
window.JOT_postEvent=function(a,b,c){var f={eventName:a,eventSrc:b||{},payload:c||{}};if(window.JOT_fullyLoaded)for(b=h.length,c=0;c<b&&c<h.length;c++){var e=h[c];e&&e.eventName==a&&(f.listenerCompId=e.compId||"",(e="function"==typeof e.handler?e.handler:window[e.handler])&&e(f))}else window.JOT_delayedEvents.push({eventName:a,eventSrc:b,payload:c})};window.JOT_delayedEvents=[];window.JOT_fullyLoaded=!1;
window.JOT_formatRelativeToNow=function(a,b){a=((new Date).getTime()-a)/6E4;if(1440<=a||0>a)return null;var c=0;60<=a&&(a/=60,c=2);2<=a&&c++;return b?window.JOT_siteRelTimeStrs[c].replace("__duration__",Math.floor(a)):window.JOT_userRelTimeStrs[c].replace("__duration__",Math.floor(a))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/site/vk3bhr/home","deleted":false,"title":"Phil Rice\u0027s Home Page","dir":"ltr"},{"path":"/site/vk3bhr/home/fm2","deleted":false,"title":"Frequency Meter V2","dir":"ltr"},{"path":"/site/vk3bhr/home/fm2/source","deleted":false,"title":"source","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/40be54/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["\u043c\u0438\u043d\u0443\u0442\u0443 \u043d\u0430\u0437\u0430\u0434","__duration__ \u043c\u0438\u043d. \u043d\u0430\u0437\u0430\u0434","\u0447\u0430\u0441 \u043d\u0430\u0437\u0430\u0434","__duration__ \u0447. \u043d\u0430\u0437\u0430\u0434"];

  
  

  

  var webspace = {"gvizGstaticVersion":"current","enableAnalytics":false,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED","siteTitle":"VK3BHR","jot2atari":{"eligibility":"ineligible"},"onepickUrl":"https://docs.google.com/picker","adsensePublisherId":null,"features":{"oAuthForChartsApi":true,"contactStoreMigrationPollForGapi":true,"gapiLoaderUtil":true,"moreMobileStyleImprovements":null,"googleChartsOverGstatic":false,"picasaAlbumInsert":false,"pageDrafts":false,"enableJot2Atari":true,"plusBadge":false,"pdfEmbedSupport":false},"isPublic":true,"newSitesBaseUrl":"https://sites.google.com","isConsumer":true,"serverFlags":{"jot2AtariLearnMoreUrl":"https://sites.google.com/google.com/sites-migration-tt","cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://accounts.google.com/AccountChooser?continue\u003dhttps://sites.google.com/site/vk3bhr/home/fm2/source\u0026service\u003djotspot","analyticsAccountId":"","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/ru/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/40be54/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/40be54/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/40be54/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/40be54/system/js/trog_edit__ru.js","https://ssl.gstatic.com/sites/p/40be54/system/app/css/trogedit.css","/site/vk3bhr/_/rsrc/1519148186000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/40be54/system/app/css/codeeditor.css","/site/vk3bhr/_/rsrc/1519148186000/system/app/css/camelot/editor-jfk.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"defaultdomain","baseUri":"/site/vk3bhr","name":"vk3bhr","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/home/fm2","parentWuid":"wuid:gx:4fb9019abbc0c61f","siteLocale":"en","timeZone":"Europe/Bucharest","type":"text","title":"source","locale":"ru","wuid":"wuid:gx:5ac1ce43610597d8","revision":2,"path":"/home/fm2/source","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"source","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"\u0412\u0435\u0431-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","onePickToken":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/site/vk3bhr/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="source - VK3BHR">
<meta itemprop="name" content="source - VK3BHR">
<meta property="og:title" content="source - VK3BHR">
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="source%20-%20VK3BHR_files/standard-css-iceberg-ltr-ltr.css">
<link rel="stylesheet" type="text/css" href="source%20-%20VK3BHR_files/overlay.css">
<link rel="stylesheet" type="text/css" href="source%20-%20VK3BHR_files/allthemes-view.css">
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/site/vk3bhr/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>source - VK3BHR</title>
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script><style></style>
<script src="source%20-%20VK3BHR_files/ga.js"></script><script src="source%20-%20VK3BHR_files/element.js"></script><link type="text/css" rel="stylesheet" charset="UTF-8" href="source%20-%20VK3BHR_files/translateelement.css"><script type="text/javascript" charset="UTF-8" src="source%20-%20VK3BHR_files/main_ru.js"></script><script type="text/javascript" charset="UTF-8" src="source%20-%20VK3BHR_files/element_main.js"></script><style>.goog-te-ftab-float {z-index:9999999; overflow:visible; position:fixed; _position:absolute;top:auto;left:auto;bottom:0px; _top:expression((-0-document.getElementById('\3a 0.floatContainer').offsetHeight+(hack3=document.documentElement.clientHeight||document.body.clientHeight)+(hack4=document.documentElement.scrollTop||document.body.scrollTop))+'px');right:20px; _left:expression((-20-document.getElementById('\3a 0.floatContainer').offsetWidth+(hack5=document.documentElement.clientWidth||document.body.clientWidth)+(hack6=document.documentElement.scrollLeft||document.body.scrollLeft))+'px');}</style></head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            " style="position: relative; min-height: 100%; top: 0px;">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="">
<table id="sites-chrome-header" class="sites-layout-hbox" style="" cellspacing="0">
<tbody><tr class="sites-header-primary-row" id="sites-chrome-userheader">
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</tbody></table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tbody><tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left" style="display: none; width: 150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_2bd" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotid="navList" class="has-expander"><li class="topLevel nav-first parent " wuid="gx:4168a80e65e9611"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="https://sites.google.com/site/vk3bhr/home" jotid="wuid:gx:4168a80e65e9611" class="sites-navigation-link topLevel">Phil Rice's Home Page</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="https://sites.google.com/site/vk3bhr/home/2mdiplexer" jotid="wuid:gx:3fb380df14230d65" class="sites-navigation-link">2Mdiplexer</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="https://sites.google.com/site/vk3bhr/home/lcm1" jotid="wuid:gx:74a7847215f2a0a8" class="sites-navigation-link">A Surprisingly Accurate Digital LC Meter</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="https://sites.google.com/site/vk3bhr/home/index2-html" jotid="wuid:gx:2830a0d48ecb1904" class="sites-navigation-link">Digital LC Meter Version 2</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="https://sites.google.com/site/vk3bhr/home/fm2" jotid="wuid:gx:4fb9019abbc0c61f" class="sites-navigation-link">Frequency Meter V2</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="https://sites.google.com/site/vk3bhr/home/morsefm" jotid="wuid:gx:41985ed85c3e1cb4" class="sites-navigation-link">morsefm</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="https://sites.google.com/site/vk3bhr/home/fm" jotid="wuid:gx:3da284843bf38d2a" class="sites-navigation-link">Phil's Frequency Meter</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="https://sites.google.com/site/vk3bhr/home/rt85" jotid="wuid:gx:477acf958e2827fd" class="sites-navigation-link">rt85</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="https://sites.google.com/site/vk3bhr/home/sa" jotid="wuid:gx:3b13010a66b43188" class="sites-navigation-link">sa</a></div></li></ul></li></ul></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<a href="https://sites.google.com/site/vk3bhr/home" dir="ltr">Phil Rice's Home Page</a>‎ &gt; ‎<a href="https://sites.google.com/site/vk3bhr/home/fm2" dir="ltr">Frequency Meter V2</a>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">source</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" class="sites-layout-name-one-column sites-layout-hbox" cellspacing="0"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; "Digital" Frequency display</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Crystal freq. = 4.000MHz +/- a bit</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; First, let us choose our weapon - 16F84 or 16F628</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Comment out the next line [;#define F84] if using a 16F628</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; F84</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#ifndef&nbsp;&nbsp;&nbsp; F84</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; #define&nbsp;&nbsp;&nbsp; F628</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#endif</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Some Testing Stuff(tm)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;#define&nbsp;&nbsp;&nbsp; testing&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp; ; Comment out when testing finished</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;#define&nbsp;&nbsp;&nbsp; Two_Line&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp; ; Un-comment for two line displays</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;************************ REVISION HISTORY *************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; FM1.000&nbsp;&nbsp;&nbsp; Originally from FM3/4 9:39pm 14 May 2002</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; As implemented in experimental 3.5MHz receiver</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; FM1.003&nbsp;&nbsp;&nbsp; Fixed? major silliness in LO-IF code</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Re-wrote USB/LSB suffix code</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Added #defines for crook displays</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Added #defines for two line displays</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Wrapped #ifdef ... endif around debugging code</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; FM1.004&nbsp;&nbsp;&nbsp; Added code to allow user to fix crook display</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Deleted #defines for crook displays</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Pin 18 is now input. 1 = good display, 0 = crook</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; FM2.000&nbsp;&nbsp;&nbsp; New Hardware! Deleted external counter &amp; gating</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Now uses the same scheme as the LC Meter, with the</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; third byte of the count implemented in the PIC.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Basically, the "output" of the timer register is</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; counted within the gate timing loop.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; FM2.001&nbsp;&nbsp;&nbsp; Discovered that I don't need to use RA0 as a gate</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; cos RA4 can be used as a timer input, even when</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; defined as an output - all that is required is to</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; set it high to count or low to inhibit.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Jeez, Microchip are smart arses.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; I dunno why I didn't spot this long ago.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (Can't be used on the LC Meter, cos its oscillator</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; needs to be clamped HIGH, not low as in this case).</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; FM2.002&nbsp;&nbsp;&nbsp; Added 9600 baud serial output via RA0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; FM2.003&nbsp;&nbsp;&nbsp; Rewrote RollOver subroutine to use INTCON,T0IF bit.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Incorporated two bits from OvrFlow counter</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; to extend range to over 80MHz.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; FM2.004&nbsp;&nbsp;&nbsp; Changed to 32 bit counting.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; FM2.005&nbsp;&nbsp;&nbsp; Added "Calibrate" mode.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; FM2.006&nbsp;&nbsp;&nbsp; Moved "divide by 4" to increase resolution of</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; the stored IF offsets</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; FM2.007&nbsp;&nbsp;&nbsp; Moved "check for rollover" out of the inner MS400</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; timing loop and adjusted loop count appropriately</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; The aim - to improve the resolution of the software</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; calibration by a factor of around 13 to 15 times.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; fm2b.007&nbsp;&nbsp;&nbsp; Ported to 16F628</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; FM2c.007&nbsp;&nbsp;&nbsp; Introduced macros</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; fm2.008&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Renumbered</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; fm2.009&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Cleaned up AM IF Offset calculation</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Converted some inline code to subroutines</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Created new 32 bit "copy" macro</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Adjusted calibration slightly</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Added a "Processor =" message</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;o-----o-----o-----o-----o-----o-----o-----o-----o-----o-----o-----o</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Some frequently used code fragments</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Use macros to make mistreaks consistently.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;-------------------------------------------------------------------</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Select Register Bank 0</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">bank0&nbsp;&nbsp;&nbsp; macro</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; errorlevel&nbsp;&nbsp;&nbsp; +302&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Re-enable bank warning</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bcf&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; STATUS,RP0&nbsp;&nbsp;&nbsp; ; Select Bank 0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; endm</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;-------------------------------------------------------------------</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Select Register Bank 1</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">bank1&nbsp;&nbsp;&nbsp; macro</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bsf&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; STATUS,RP0&nbsp;&nbsp;&nbsp; ; Select Bank 1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; errorlevel&nbsp;&nbsp;&nbsp; -302&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; disable warning</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; endm</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;-------------------------------------------------------------------</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Copy a 32 bit thing from one place to another</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">copy&nbsp;&nbsp;&nbsp; macro&nbsp;&nbsp;&nbsp; from,to</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; from+0,W</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; to+0</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; from+1,W</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; to+1</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; from+2,W</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; to+2</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; from+3,W</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; to+3</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; endm</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; CPU configuration</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#ifdef&nbsp;&nbsp;&nbsp; F84</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MESSG&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; "Processor = 16F84"</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; #define &nbsp;&nbsp;&nbsp; RAMStart&nbsp;&nbsp;&nbsp; 0x0C&nbsp;&nbsp;&nbsp; ; by VK3BHR</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; processor&nbsp;&nbsp;&nbsp; 16f84</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; include&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;p16f84.inc&gt;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; __config&nbsp;&nbsp;&nbsp; _HS_OSC &amp; _PWRTE_ON &amp; _WDT_OFF</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#endif</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#ifdef&nbsp;&nbsp;&nbsp; F628</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MESSG&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; "Processor = 16F628"</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; #define &nbsp;&nbsp;&nbsp; RAMStart&nbsp;&nbsp;&nbsp; 0x20</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; processor&nbsp;&nbsp;&nbsp; 16f628</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; include&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;p16f628.inc&gt;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;
 __config&nbsp;&nbsp;&nbsp; _HS_OSC &amp; _PWRTE_ON &amp; _WDT_OFF &amp;
 _CP_OFF &amp; _BODEN_ON &amp; _LVP_OFF</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#endif</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; I/O configuration</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define S_out&nbsp;&nbsp;&nbsp; PORTA,0x00&nbsp;&nbsp;&nbsp; ; 9600 baud serial out</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define PUFF&nbsp;&nbsp;&nbsp; PORTA,0x00&nbsp;&nbsp;&nbsp; ; Testing counter out</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; FIXIT&nbsp;&nbsp;&nbsp; PORTA,0x01&nbsp;&nbsp;&nbsp; ; 1 = "good display"</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 0 = do CRLF at "chr 8"</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; ENA&nbsp;&nbsp;&nbsp; PORTA,0x02&nbsp;&nbsp;&nbsp; ; Display "E"</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; RS&nbsp;&nbsp;&nbsp; PORTA,0x03&nbsp;&nbsp;&nbsp; ; Display "RS"</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; CLAMP&nbsp;&nbsp;&nbsp; PORTA,0x04&nbsp;&nbsp;&nbsp; ; Pull-down the timer input</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; Store&nbsp;&nbsp;&nbsp; PORTB,0x04&nbsp;&nbsp;&nbsp; ; Pin 10, 0 = Measure BFO</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; Add_LO&nbsp;&nbsp;&nbsp; PORTB,0x05&nbsp;&nbsp;&nbsp; ; Pin 11, 0 = RF := LO + IF</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;
 &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 = RF := | LO + (-IF)
 |</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; BFO_Lo&nbsp;&nbsp;&nbsp; PORTB,0x06&nbsp;&nbsp;&nbsp; ; Pin 12, 0 = BFO on lower freq.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; BFO_Hi&nbsp;&nbsp;&nbsp; PORTB,0x07&nbsp;&nbsp;&nbsp; ; Pin 13, 0 = BFO on higher freq.</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; Prg_FLG&nbsp;&nbsp;&nbsp; FLAGS,0x05</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; AMflag&nbsp;&nbsp;&nbsp; FLAGS,0x03&nbsp;&nbsp;&nbsp; ; 0 = Don't print USB/LSB suffix</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; beq&nbsp;&nbsp;&nbsp; bz&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Motorola syntax branches</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; BEQ&nbsp;&nbsp;&nbsp; bz</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; BNE&nbsp;&nbsp;&nbsp; bnz</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; bne&nbsp;&nbsp;&nbsp; bnz</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; BCC&nbsp;&nbsp;&nbsp; bnc</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; bcc&nbsp;&nbsp;&nbsp; bnc</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; BCS&nbsp;&nbsp;&nbsp; bc</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; bcs&nbsp;&nbsp;&nbsp; bc</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; BRA&nbsp;&nbsp;&nbsp; goto</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#define&nbsp;&nbsp;&nbsp; bra&nbsp;&nbsp;&nbsp; goto</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; file register declarations: uses only registers in bank0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; bank 0 file registers begin at 0x20 in the 16F628</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*******************************************************************</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; cblock&nbsp;&nbsp;&nbsp; RAMStart</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; dbg0:4&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Debugging stuff</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; dbg1:4</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; dbg2:4</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; dbg3:4</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; dbg4:4</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; dbg5:4</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bcd:5&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; BCD, MSD first </span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; SBflag&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 0 = Lower BFO frequency</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 1 = Higher</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; COUNT&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Bin to BCD convert (bit count)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;
 cnt&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 (BCD BYTES)</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CHR</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; TEMP&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; DATS/Putchr temporary</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; pmsg_t&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Used by PMSG</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; FLAGS</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; S_Wtemp&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; "debug" Variables</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; S_count</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; D_Wtemp</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; D_Stemp</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; D_FSR</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; D_hex</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; endc</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#ifdef&nbsp;&nbsp;&nbsp; F84</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Part2&nbsp;&nbsp;&nbsp; equ&nbsp;&nbsp;&nbsp; D_hex+1&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Just tack on end</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#endif</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#ifdef&nbsp;&nbsp;&nbsp; F628</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Part2&nbsp;&nbsp;&nbsp; equ&nbsp;&nbsp;&nbsp; 0x70&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; $70-7F Visible from all banks</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#endif</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; cblock&nbsp;&nbsp;&nbsp; Part2</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; COUNT1&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Used by delay routines</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; COUNT2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Timing (100ms)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; COUNT3&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Timing (100ms)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; COUNT4&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Timing (400ms)</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; AccA:4&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Binary, MSByte first</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; AccB:4&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Intermediate frequency</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; Hold:4&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Used in "cal" mode</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; endc</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Begin Executable Stuff(tm)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; org&nbsp;&nbsp;&nbsp; 0</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">GO&nbsp;&nbsp;&nbsp; clrwdt&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 0 &lt;&lt; Reset</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; clrf&nbsp;&nbsp;&nbsp; INTCON&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 1 No interrupts</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#ifdef&nbsp;&nbsp;&nbsp; F628</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x07&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 2 Comparator off</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; CMCON&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 3</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#endif</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; START&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 4 &lt;&lt; Interrupt.</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Part of string printer</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">pmsub&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; PCL&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Goto W</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; nop&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Just in case</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">pm_end&nbsp;&nbsp;&nbsp; return</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Text Strings (stored in RETLWs)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">mhz&nbsp;&nbsp;&nbsp; dt&nbsp;&nbsp;&nbsp; " MHz ",0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Spaces&nbsp;&nbsp;&nbsp; dt&nbsp;&nbsp;&nbsp; "&nbsp;&nbsp; ",0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">USB&nbsp;&nbsp;&nbsp; dt&nbsp;&nbsp;&nbsp; "USB",0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">LSB&nbsp;&nbsp;&nbsp; dt&nbsp;&nbsp;&nbsp; "LSB",0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Prog&nbsp;&nbsp;&nbsp; dt&nbsp;&nbsp;&nbsp; "PRG",0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Cal&nbsp;&nbsp;&nbsp; dt&nbsp;&nbsp;&nbsp; "CAL",0</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">adv1&nbsp;&nbsp;&nbsp; dt&nbsp;&nbsp;&nbsp; "FM2.009 ",0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">adv2&nbsp;&nbsp;&nbsp; dt&nbsp;&nbsp;&nbsp; "- VK3BHR",0</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">ovr1&nbsp;&nbsp;&nbsp; dt&nbsp;&nbsp;&nbsp; "&nbsp;&nbsp; Over ",0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">ovr2&nbsp;&nbsp;&nbsp; dt&nbsp;&nbsp;&nbsp; "Range&nbsp;&nbsp; ",0</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#ifdef&nbsp;&nbsp;&nbsp; Two_Line</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">adv3&nbsp;&nbsp;&nbsp; dt&nbsp;&nbsp;&nbsp; "1234567890ABCDEF",0</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#endif</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Main Program</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">START&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; InitIO&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; INITIALISE PORTS</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CLRF&nbsp;&nbsp;&nbsp; PORTA</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CLRF&nbsp;&nbsp;&nbsp; PORTB</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bsf&nbsp;&nbsp;&nbsp; S_out&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Serial output to idle</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;
 CALL&nbsp;&nbsp;&nbsp; LCDINIT&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp; ; INITIALIZE LCD MODULE&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; adv1&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Sign on</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; pmsg</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; btfss&nbsp;&nbsp;&nbsp; FIXIT&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Test input 1 = just return</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; LINE2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 0 = fix bad display</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; adv2</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; pmsg</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; MS512&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Delay for about 1 sec.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; MS512&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 0.512 sec x 2</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; CLEAR</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Check if in "Calibrate" mode</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; btfsc&nbsp;&nbsp;&nbsp; Store&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; If grounded initially</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; newbit&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; then were in "cal"</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;
 MOVLW&nbsp;&nbsp;&nbsp; 0xfd&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Set
 initial counter&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; Hold+0&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; value</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0xff&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; Hold+1&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; for a 4 MHZ XTAL</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0xbf</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; Hold+2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0x00&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Unused</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; Hold+3&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">GetCal&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; Measure&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; Display</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; Cal&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Say "we're calibrating"</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; pmsg</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; HOME</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Adjust Cal value</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">cal_dn&nbsp;&nbsp;&nbsp; btfsc&nbsp;&nbsp;&nbsp; BFO_Lo</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; cal_up</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; Hold+2,f&nbsp;&nbsp;&nbsp; ; Add 1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bne&nbsp;&nbsp;&nbsp; inc_xit</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; Hold+1,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bne&nbsp;&nbsp;&nbsp; inc_xit</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; Hold+0,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">inc_xit&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; StorCal</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">cal_up&nbsp;&nbsp;&nbsp; btfsc&nbsp;&nbsp;&nbsp; BFO_Hi</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; StorCal</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Hold := Hold + (1-)&nbsp;&nbsp;&nbsp; ; Subtract 1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Hadd_2&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0xff&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Process LS byte</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; addwf&nbsp;&nbsp;&nbsp; Hold+2,F</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bcc&nbsp;&nbsp;&nbsp; Hadd_1&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; If no carry,do next</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; Hold+1,f&nbsp;&nbsp;&nbsp; ; Else roll over higher</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bne&nbsp;&nbsp;&nbsp; Hadd_1&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; bytes as appropriate</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; Hold+0,f&nbsp;&nbsp;&nbsp; ; may roll over MSByte</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Hadd_1&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0xff&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Process next byte</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; addwf&nbsp;&nbsp;&nbsp; Hold+1,F</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bcc&nbsp;&nbsp;&nbsp; Hadd_0&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; If no carry,do next</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; Hold+0,f&nbsp;&nbsp;&nbsp; ; may roll over MSByte</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Hadd_0&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0xff&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Process next byte</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; addwf&nbsp;&nbsp;&nbsp; Hold+0,F</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Time to save "Cal" value?</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">StorCal&nbsp;&nbsp;&nbsp; btfss&nbsp;&nbsp;&nbsp; Store&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Ready to store it?</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; GetCal</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; MS512&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Delay 0.5 sec</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; btfss&nbsp;&nbsp;&nbsp; Store&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; De-bounce</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; GetCal</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; copy&nbsp;&nbsp;&nbsp; Hold,AccB&nbsp;&nbsp;&nbsp; ; Write EEPROM from AccB</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x10&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; EEADR of Cal value</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; EE_WR</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Begin a new measurement cycle</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">newbit&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x10&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; EEADR of Cal value</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; EE_RD&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; in AccB</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; copy&nbsp;&nbsp;&nbsp; AccB,Hold&nbsp;&nbsp;&nbsp; ; Get timing "constant"</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; HOME&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Display ready</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; clrf&nbsp;&nbsp;&nbsp; SBflag&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 0 = Lower BFO frequency</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 1 = Higher</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bcf&nbsp;&nbsp;&nbsp; AMflag&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 0 = No USB/LSB suffix</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bcf&nbsp;&nbsp;&nbsp; Prg_FLG</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; btfsc&nbsp;&nbsp;&nbsp; Store&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Doing "BFO STORE"?</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; GetOffs</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; MS512&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Delay 0.5 sec</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; btfsc&nbsp;&nbsp;&nbsp; Store&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; De-bounce</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; GetOffs</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">GetIf&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; Measure&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Get freq in AccA:4</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; copy&nbsp;&nbsp;&nbsp; AccA,AccB&nbsp;&nbsp;&nbsp; ; For EEPROM Writing</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; Display&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Display freq in AccA</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; Prog&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Say "we're programming"</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; pmsg</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; HOME</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; btfss&nbsp;&nbsp;&nbsp; Store&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Ready to store it?</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; GetIf</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; MS512&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Delay 0.5 sec</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; btfss&nbsp;&nbsp;&nbsp; Store&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; De-bounce</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; GetIf</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bsf&nbsp;&nbsp;&nbsp; Prg_FLG&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Flag "to be stored"</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">GetOffs&nbsp;&nbsp;&nbsp; btfss&nbsp;&nbsp;&nbsp; BFO_Hi&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Which Offset??</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; Get2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Point @ EEPROM</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; btfss&nbsp;&nbsp;&nbsp; BFO_Lo&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 4 bytes each</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; Ch2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; BFO low link only</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; Ch3&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; No links</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Get2&nbsp;&nbsp;&nbsp; btfss&nbsp;&nbsp;&nbsp; BFO_Lo</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; Ch0&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Both links</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; Ch1&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; BFO high link only</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Ch0&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x00&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Offset channel 0 (both links fitted)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; EndOff</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Ch1&nbsp;&nbsp;&nbsp; bsf&nbsp;&nbsp;&nbsp; AMflag&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; We're gunna print</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; comf&nbsp;&nbsp;&nbsp; SBflag,f&nbsp;&nbsp;&nbsp; ; that BFO is on higher frequency</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x04&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Offset channel 1 (BFO_Hi link fitted)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; EndOff</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Ch2&nbsp;&nbsp;&nbsp; bsf&nbsp;&nbsp;&nbsp; AMflag&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; We're gunna print</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; that BFO is on lower frequency</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x08&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Offset channel 2 (BFO_Lo link fitted)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; EndOff</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Ch3&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x0C&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Offset channel 3 (no links fitted)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; EndOff</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">EndOff&nbsp;&nbsp;&nbsp; btfsc&nbsp;&nbsp;&nbsp; Prg_FLG&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Storing Offset?</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; Do_St&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; If not, then</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; EE_RD&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; must be reading.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; Do_Meas</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Do_St&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; EE_WR</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Now have IF in AccB</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Do_Meas&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; Measure&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Measure Local Osc Freq.</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Now have LO in "AccA"</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; and&nbsp; IF in "AccB"</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Add_Sub&nbsp;&nbsp;&nbsp; btfss&nbsp;&nbsp;&nbsp; Add_LO&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Add or Sub LO freq?</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; AddLSB&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Clear = just add</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; MinusA&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; RF := |IF - LO|</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; SBflag is OK</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">AddLSB&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; AplusB</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Fix overflow. If negative then make positive</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; btfss&nbsp;&nbsp;&nbsp; AccA+0,7&nbsp;&nbsp;&nbsp; ; Set? (=Overflow)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; OK2go&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Clear = OK 2 print</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; MinusA&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Make positive and</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; comf&nbsp;&nbsp;&nbsp; SBflag,f&nbsp;&nbsp;&nbsp; ; Swap USB/LSB</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Display resulting number in AccA</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">OK2go&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; Display&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; display result at last</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Print suffix - USB, LSB or nuffin</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; btfsc&nbsp;&nbsp;&nbsp; AMflag&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Do we print at all?</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; trySBf</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; Spaces&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; nuffin = spaces</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; EndMsg</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">trySBf&nbsp;&nbsp;&nbsp; btfsc&nbsp;&nbsp;&nbsp; SBflag,0&nbsp;&nbsp;&nbsp; ; Which sideband?</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; pLSB</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; USB&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; USB obviously</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; EndMsg</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">pLSB&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; LSB&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; LSB</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; EndMsg</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">EndMsg&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; pmsg&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Print selected trailer</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#ifdef&nbsp;&nbsp;&nbsp; Two_Line</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; LINE2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; WRITE second LINE</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; adv3</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; pmsg</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#endif</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; newbit&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Start next measurement</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; AccA := AccA + AccB</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">AplusB&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; AccB+3,W&nbsp;&nbsp;&nbsp; ; Process LSB</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; addwf&nbsp;&nbsp;&nbsp; AccA+3,F</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bcc&nbsp;&nbsp;&nbsp; Add_2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; If no carry,do next</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; AccA+2,f&nbsp;&nbsp;&nbsp; ; Else roll over higher</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bne&nbsp;&nbsp;&nbsp; Add_2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; bytes as appropriate</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; AccA+1,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bne&nbsp;&nbsp;&nbsp; Add_2</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; AccA+0,f&nbsp;&nbsp;&nbsp; ; may roll over MSByte</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Add_2&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; AccB+2,W&nbsp;&nbsp;&nbsp; ; Process next byte</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; addwf&nbsp;&nbsp;&nbsp; AccA+2,F</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bcc&nbsp;&nbsp;&nbsp; Add_1&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; If no carry,do next</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; AccA+1,f&nbsp;&nbsp;&nbsp; ; Else roll over higher</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bne&nbsp;&nbsp;&nbsp; Add_1&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; bytes as appropriate</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; AccA+0,f&nbsp;&nbsp;&nbsp; ; may roll over MSByte</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Add_1&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; AccB+1,W&nbsp;&nbsp;&nbsp; ; Process next byte</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; addwf&nbsp;&nbsp;&nbsp; AccA+1,F</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bcc&nbsp;&nbsp;&nbsp; Add_0&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; If no carry,do next</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; AccA+0,f&nbsp;&nbsp;&nbsp; ; may roll over MSByte</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Add_0&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; AccB+0,W&nbsp;&nbsp;&nbsp; ; Process next byte</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; addwf&nbsp;&nbsp;&nbsp; AccA+0,F</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; return</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Negate number in AccA (2's complement form)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">MinusA&nbsp;&nbsp;&nbsp; comf&nbsp;&nbsp;&nbsp; AccA+0,f&nbsp;&nbsp;&nbsp; ; Complement all bits</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; comf&nbsp;&nbsp;&nbsp; AccA+1,f&nbsp;&nbsp;&nbsp; ; of number</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; comf&nbsp;&nbsp;&nbsp; AccA+2,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; comf&nbsp;&nbsp;&nbsp; AccA+3,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; AccA+3,f&nbsp;&nbsp;&nbsp; ; Add 1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bne&nbsp;&nbsp;&nbsp; N_xit</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; AccA+2,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bne&nbsp;&nbsp;&nbsp; N_xit</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; AccA+1,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bne&nbsp;&nbsp;&nbsp; N_xit</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; AccA+0,f</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">N_xit&nbsp;&nbsp;&nbsp; return</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Divide AccA:4 by 4</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Div4&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; Div2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Divide AccA:4 by 4</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Divide AccA:4 by 2</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Div2&nbsp;&nbsp;&nbsp; rrf&nbsp;&nbsp;&nbsp; AccA+0,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; rrf&nbsp;&nbsp;&nbsp; AccA+1,f&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; rrf&nbsp;&nbsp;&nbsp; AccA+2,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; rrf&nbsp;&nbsp;&nbsp; AccA+3,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bcf&nbsp;&nbsp;&nbsp; AccA+0,7&nbsp;&nbsp;&nbsp; ; Possible bad carry in.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; return</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Print String addressed by W</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Note: Strings are in program space</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">pmsg&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; pmsg_t&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Temp for pointer</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">pm1&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; pmsg_t,W&nbsp;&nbsp;&nbsp; ; Get current pointer</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; pmsub</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; andlw&nbsp;&nbsp;&nbsp; 0xff&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Test returned value</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; beq&nbsp;&nbsp;&nbsp; pm_end&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; NULL = All done</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; DATS</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; pmsg_t,F</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; pm1</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Delay for 400ms (trimmed for actual clock freq)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Check for Timer register roll over and count 'em</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Uses: W, COUUNT1, COUNT2, COUNT3 &amp; others</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">MS400&nbsp;&nbsp;&nbsp;
 MOVF&nbsp;&nbsp;&nbsp; Hold+0,w&nbsp;&nbsp;&nbsp; ; 100 MS DELAY 
LOOP&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; COUNT1&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 4 MHZ XTAL</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVF&nbsp;&nbsp;&nbsp; Hold+1,w&nbsp;&nbsp;&nbsp; ; Count up</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; COUNT2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; to 24 bit overflow</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVF&nbsp;&nbsp;&nbsp; Hold+2,w</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; COUNT3</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">L3&nbsp;&nbsp;&nbsp; INCFSZ&nbsp;&nbsp;&nbsp; COUNT3,F</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; GOTO&nbsp;&nbsp;&nbsp; L3</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; RollOver&nbsp;&nbsp;&nbsp; ; Check for Timer0 RollOver</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; INCFSZ&nbsp;&nbsp;&nbsp; COUNT2,F</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; GOTO&nbsp;&nbsp;&nbsp; L3</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; INCFSZ&nbsp;&nbsp;&nbsp; COUNT1,F</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; GOTO&nbsp;&nbsp;&nbsp; L3</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; RETLW&nbsp;&nbsp;&nbsp; 0</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; SEND A COMMAND BYTE TO LCD DISPLAY MODULE&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">STROBE&nbsp;&nbsp;&nbsp; BCF&nbsp;&nbsp;&nbsp; RS&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; SELECT COMMAND REGISTER</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; GOTO&nbsp;&nbsp;&nbsp; CM</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Put a BCD nybble to display</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">PutNyb&nbsp;&nbsp;&nbsp; ANDLW&nbsp;&nbsp;&nbsp; 0x0F&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; MASK OFF OTHER PACKED BCD DIGIT</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; ADDLW&nbsp;&nbsp;&nbsp; 0x30&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Convert BIN to ASCII</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Put a data byte to display</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">DATS&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; TEMP&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Save character for LCD</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; putchr</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; TEMP,w</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; BSF&nbsp;&nbsp;&nbsp; RS&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; SELECT DATA REGISTER</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">CM&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; CHR&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; STORE CHAR TO DISPLAY</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;
 SWAPF&nbsp;&nbsp;&nbsp; CHR,W&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 
SWAP UPPER AND LOWER NIBBLES (4 BIT MODE)</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; PB_dly</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVF&nbsp;&nbsp;&nbsp; CHR,W&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; GET CHAR AGAIN </span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Put 4 bits to LCD &amp; wait (untrimmed)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">PB_dly&nbsp;&nbsp;&nbsp; ANDLW&nbsp;&nbsp;&nbsp; 0x0F&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; MASK OFF UPPER 4 BITS</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;
 MOVWF&nbsp;&nbsp;&nbsp; PORTB&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 
SEND DATA TO DISPLAY&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; BSF&nbsp;&nbsp;&nbsp; ENA&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; ENA HIGH</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; NOP&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; BCF&nbsp;&nbsp;&nbsp; ENA&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; ENA LOW </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Fall into 200us DELAY subroutine</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Delay for 200us (untrimmed)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Uses: W, COUNT1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">D200us</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">DELAY&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0x42&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; DELAY 200us</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; COUNT1&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">NXT5&nbsp;&nbsp;&nbsp; DECFSZ&nbsp;&nbsp;&nbsp; COUNT1,F</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; GOTO&nbsp;&nbsp;&nbsp; NXT5&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; RETLW&nbsp;&nbsp;&nbsp; 0</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Delay for 2ms (untrimmed)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Uses: W, COUNT2, COUNT1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">MS2&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0x0A&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; DELAY 2ms</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; COUNT2</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">LP15&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; D200us</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; DECFSZ&nbsp;&nbsp;&nbsp; COUNT2,F</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; GOTO&nbsp;&nbsp;&nbsp; LP15</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; RETLW&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Delay for 512ms (untrimmed)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Uses: W, COUNT3, COUNT2, COUNT1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">MS512&nbsp;&nbsp;&nbsp; clrw&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 0 -&gt; 256 loops</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Delay for multiples of 2ms (untrimmed)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Uses: W, COUNT3, COUNT2, COUNT1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">MS2xW&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; COUNT3&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">LPx15&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; MS2</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; DECFSZ&nbsp;&nbsp;&nbsp; COUNT3,F</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; GOTO&nbsp;&nbsp;&nbsp; LPx15</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; RETLW&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;******************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Convert 32-bit binary number at &lt;AccA:4&gt; into a bcd number</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; at &lt;bcd:5&gt;. Uses Mike Keitz's procedure for handling bcd </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; adjust. Microchip AN526</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">B2_BCD</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">b2bcd&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; .32&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 32-bits</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; COUNT&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; make cycle counter</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; clrf&nbsp;&nbsp;&nbsp; bcd+0&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; clear result area</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; clrf&nbsp;&nbsp;&nbsp; bcd+1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; clrf&nbsp;&nbsp;&nbsp; bcd+2</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; clrf&nbsp;&nbsp;&nbsp; bcd+3</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; clrf&nbsp;&nbsp;&nbsp; bcd+4</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">b2bcd2&nbsp; movlw&nbsp;&nbsp;&nbsp; bcd&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; make pointer</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; FSR</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; .5&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Number of BCD bytes?</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; cnt&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 2 BCD digits per byte</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">; Mike's routine:</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">b2bcd3&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x33&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 addwf&nbsp;&nbsp;&nbsp; INDF,f&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 
add to both nybbles</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 btfsc&nbsp;&nbsp;&nbsp; INDF,3&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 
test if low result &gt; 7</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 andlw&nbsp;&nbsp;&nbsp; 0xf0&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; low
 result &gt;7 so take the 3 out</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 btfsc&nbsp;&nbsp;&nbsp; INDF,7&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 
test if high result &gt; 7</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 andlw&nbsp;&nbsp;&nbsp; 0x0f&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 
high result &gt; 7 so ok</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 subwf&nbsp;&nbsp;&nbsp; INDF,f&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 
any results &lt;= 7, subtract back</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; FSR,f&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; point to next</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; decfsz&nbsp;&nbsp;&nbsp; cnt,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; b2bcd3</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rlf&nbsp;&nbsp;&nbsp; AccA+3,f&nbsp;&nbsp;&nbsp; ; get another bit</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rlf&nbsp;&nbsp;&nbsp; AccA+2,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rlf&nbsp;&nbsp;&nbsp; AccA+1,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rlf&nbsp;&nbsp;&nbsp; AccA+0,f</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rlf&nbsp;&nbsp;&nbsp; bcd+4,f&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; put it into bcd</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rlf&nbsp;&nbsp;&nbsp; bcd+3,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rlf&nbsp;&nbsp;&nbsp; bcd+2,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rlf&nbsp;&nbsp;&nbsp; bcd+1,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rlf&nbsp;&nbsp;&nbsp; bcd+0,f</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; decfsz&nbsp;&nbsp;&nbsp; COUNT,f&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; all done?</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; b2bcd2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; no, loop</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; yes</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*********** INITIALISE LCD MODULE 4 BIT MODE ***********************</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">LCDINIT&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; MS512&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Wait 0.512 sec for LCD&nbsp; RESET</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; BCF&nbsp;&nbsp;&nbsp; RS&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; REGISTER SELECT LOW</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; BCF&nbsp;&nbsp;&nbsp; ENA&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; ENABLE LINE LOW</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0x03&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; PB_dly</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; MS512&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; WAIT FOR DISPLAY TO CATCH UP</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0x03&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 2</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; PB_dly</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0x03&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 3</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; PB_dly</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0x02&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Fn set 4 bits</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; PB_dly</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0x28&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; DISPLAY 2 Line , 5x7 Dot's</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; STROBE&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Suggested by PA0EJH</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; DELAY&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0x0C&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 0x0C DISPLAY ON</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; STROBE</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; DELAY&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0x06&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 0x06 ENTRY MODE SET</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; STROBE</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; DELAY</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0x01&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 0x01 CLEAR DISPLAY</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; STROBE</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; MS2</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; RETLW&nbsp;&nbsp;&nbsp; 0</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;************ MOVE TO START OF LINE 2 *****************</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">LINE2&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0xC0&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; ADDRESS FOR SECOND LINE OF DISPLAY</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; STROBE</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; DELAY</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;************ CLEAR DISPLAY ***************************</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">CLEAR&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0x01&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; COMMAND TO CLEAR DISPLAY</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; STROBE</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; MS2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; LONGER DELAY NEEDED WHEN CLEARING DISPLAY</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;*********** MOVE TO HOME *****************************</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">HOME&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; crlf&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Serial</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0x02&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; COMMAND TO HOME LCD DISPLAY</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; STROBE</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; MS2</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;********************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Initialise Input &amp; Output devices</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;********************************************************************</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">InitIO&nbsp;&nbsp;&nbsp; bank1</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x37&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Option register</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; OPTION_REG&nbsp;&nbsp;&nbsp; ; Port B weak pull-up enabled</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; INTDEG Don't care</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Count RA4/T0CKI</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Count on falling edge</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Prescale Timer/counter</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; divide Timer/counter by 256</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; PORTA:-</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x02&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; initialise data direction</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 1 = input, 0 = output</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; PORTA has 5 pins&nbsp;&nbsp;&nbsp;&nbsp; 4 3 2 1 0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;
 &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 
0x02&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&nbsp;&nbsp; 0 0 0 0 0 0 1 0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;
 movwf&nbsp;&nbsp;&nbsp; TRISA&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 
PORTA&lt;0&gt;&nbsp;&nbsp; = Serial + Debugging Out</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; PORTA&lt;1&gt;&nbsp;&nbsp; = FIXIT (input)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; PORTA&lt;2&gt;&nbsp;&nbsp; = LCD "E" Out</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; PORTA&lt;3&gt;&nbsp;&nbsp; = LCD "RS" Out</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;
 &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 
PORTA&lt;4&gt;&nbsp;&nbsp; = "Input" with pull-down</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;
 &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Actually an output.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; PORTA&lt;5:7&gt; = not implemented in 16F84</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; PORTB:-</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0xf0&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; initialise data direction</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; PORTB has 8 pins</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;
 &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; port 
pin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7 6 5 4 3 2 1 0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;
 &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 
0xf0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&nbsp;&nbsp; 1 1 1 1 0 0 0 0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; TRISB&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; PORTB&lt;0&gt;&nbsp;&nbsp; = LCD "DB4"</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;
 &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 
PORTB&lt;1&gt;&nbsp;&nbsp; =&nbsp;&nbsp;&nbsp;&nbsp; "DB5"</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;
 &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 
PORTB&lt;2&gt;&nbsp;&nbsp; =&nbsp;&nbsp;&nbsp;&nbsp; "DB6"</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;
 &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 
PORTB&lt;3&gt;&nbsp;&nbsp; =&nbsp;&nbsp;&nbsp;&nbsp; "DB7"</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; PORTB&lt;4&gt;&nbsp;&nbsp; = Input</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; PORTB&lt;5&gt;&nbsp;&nbsp; = Input</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; PORTB&lt;6&gt;&nbsp;&nbsp; = Input</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; PORTB&lt;7&gt;&nbsp;&nbsp; = Input</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bank0</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; return&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Measure Frequency. Stash in "AccA:4"</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Measure&nbsp;&nbsp;&nbsp; bcf&nbsp;&nbsp;&nbsp; CLAMP&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; CLOSE GATE for safety</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bcf&nbsp;&nbsp;&nbsp; INTCON,T0IF&nbsp;&nbsp;&nbsp; ; Clear any previous overflow</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CLRF&nbsp;&nbsp;&nbsp; TMR0&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; RESET INTERNAL COUNT (INCLUDING PRESCALER)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; See page 27 Section 6.0</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CLRF&nbsp;&nbsp;&nbsp; AccA+0&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Ready to receive 32 bit number</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CLRF&nbsp;&nbsp;&nbsp; AccA+1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CLRF&nbsp;&nbsp;&nbsp; AccA+2</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CLRF&nbsp;&nbsp;&nbsp; AccA+3</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bsf&nbsp;&nbsp;&nbsp; CLAMP&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; OPEN GATE</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; MS400&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 400MS DELAY</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bcf&nbsp;&nbsp;&nbsp; CLAMP&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; CLOSE GATE (COUNT COMPLETE)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; nop&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; and allow time for</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; nop&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; the registers to catch up</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; nop</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; nop</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; nop</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; RollOver&nbsp;&nbsp;&nbsp; ; Final check, just in case</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVF&nbsp;&nbsp;&nbsp; TMR0,W&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; AccA+2</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Now empty the prescaler</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">PSC1&nbsp;&nbsp;&nbsp; bank1</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bcf&nbsp;&nbsp;&nbsp; OPTION_REG,T0SE&nbsp;&nbsp;&nbsp; ; Clock the prescaler</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; nop</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bsf&nbsp;&nbsp;&nbsp; OPTION_REG,T0SE</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bank0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; DECF&nbsp;&nbsp;&nbsp; AccA+3,F&nbsp;&nbsp;&nbsp; ; Decrement the counter</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; TMR0,W&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Has TMR0 changed?</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; xorwf&nbsp;&nbsp;&nbsp; AccA+2,W&nbsp;&nbsp;&nbsp; ; if unchanged, XOR -&gt; 0</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; beq&nbsp;&nbsp;&nbsp; PSC1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">; AccA : AccA+1 : AccA+2 : AccA+3 now holds 32 bit result</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">; Rollover subroutine has set AccA+0 and AccA+1 suitably.</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; return</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Account for TMR0 overflows when counting</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Check at regular intervals and handle as</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; necessary.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Needs to be done at less than 936us (@ 70MHz in)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; intervals, or else it can lose counts.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">RollOver</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; btfss&nbsp;&nbsp;&nbsp; INTCON,T0IF&nbsp;&nbsp;&nbsp; ; Rolled over?</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; RO3&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; No</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">RO1&nbsp;&nbsp;&nbsp; bcf&nbsp;&nbsp;&nbsp; INTCON,T0IF&nbsp;&nbsp;&nbsp; ; Yes. ACK!</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; INCF&nbsp;&nbsp;&nbsp; AccA+1,f&nbsp;&nbsp;&nbsp; ; Count it</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bne&nbsp;&nbsp;&nbsp; RO2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Overflowed?</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; AccA+0,f&nbsp;&nbsp;&nbsp; ; No need to check</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">RO2&nbsp;&nbsp;&nbsp; return</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Balance path lengths</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">RO3&nbsp;&nbsp;&nbsp; nop</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; nop</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; RO2</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;**********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Display frequency</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Display contents of AccA+0...AccA+3 on LCD</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; First convert to BCD, Then ASCII (nybble at a time)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; In present version, divide ACCA:4 by 4 since gate</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; time = 0.4 second, then ignore 2 most significant BCD digits</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">Display&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; Div4</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; B2_BCD&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; CONVERT all AccA TO BCD</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVF&nbsp;&nbsp;&nbsp; bcd+1,W&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 10's of MHz</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; ANDLW&nbsp;&nbsp;&nbsp; 0x0F&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; MASK OFF OTHER PACKED BCD DIGIT</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; BTFSS&nbsp;&nbsp;&nbsp; STATUS,Z&nbsp;&nbsp;&nbsp; ; IS IT A '0' ?</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; GOTO&nbsp;&nbsp;&nbsp; NoBlank</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0x20&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; YES PRINT A BLANK SPACE</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; DATS</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; GOTO&nbsp;&nbsp;&nbsp; NxtDig</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">NoBlank&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; PutNyb&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Display 10's of MHz</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">NxtDig&nbsp; swapf&nbsp;&nbsp;&nbsp; bcd+2,W&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 1's of MHz</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; PutNyb</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; '.'&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Decimal Point</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; DATS</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVF&nbsp;&nbsp;&nbsp; bcd+2,W&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 100's of KHz</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; PutNyb</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; SWAPF&nbsp;&nbsp;&nbsp; bcd+3,W&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 10's of KHz</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; PutNyb</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVF&nbsp;&nbsp;&nbsp; bcd+3,W&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 1's of KHz</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; PutNyb</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; SWAPF&nbsp;&nbsp;&nbsp; bcd+4,W&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 100's of Hz</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; PutNyb</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVF&nbsp;&nbsp;&nbsp; bcd+4,W&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 10's of Hz</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; PutNyb</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; btfss&nbsp;&nbsp;&nbsp; FIXIT&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Test input 1 = just return</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; LINE2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 0 = fix bad display</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; mhz&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; WRITE " Mhz" AT end OF LINE</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; pmsg&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; includes RETURN</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;********************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Read EEPROM into "AccB"&nbsp; (AccB must be visible in both</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; W -&gt; memory to read&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; memory banks 0 &amp; 1)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;********************************************************************&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">EE_RD</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#ifdef&nbsp;&nbsp;&nbsp; F628</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bank1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#endif</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; EEADR&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Address to read</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#ifdef&nbsp;&nbsp;&nbsp; F628</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bank0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#endif</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; XORLW&nbsp;&nbsp;&nbsp; 0x0C&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Special case (no links)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; BEQ&nbsp;&nbsp;&nbsp; AVERAGE</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; EE_R</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; AccB+0</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; EE_Rinc</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; AccB+1</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; EE_Rinc</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; AccB+2</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; EE_Rinc</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; AccB+3</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; RETURN</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;--------------------------------------------------------------------</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#ifdef F84</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">EE_Rinc&nbsp;&nbsp;&nbsp; INCF&nbsp;&nbsp;&nbsp; EEADR,F&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; bump address</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">EE_R&nbsp;&nbsp;&nbsp; bank1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; BSF&nbsp;&nbsp;&nbsp; EECON1,RD&nbsp;&nbsp;&nbsp; ; EE Read</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bank0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVF&nbsp;&nbsp;&nbsp; EEDATA,W&nbsp;&nbsp;&nbsp; ; W = EEDATA</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; RETURN</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#endif</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;--------------------------------------------------------------------</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#ifdef&nbsp;&nbsp;&nbsp; F628</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">EE_Rinc&nbsp;&nbsp;&nbsp; bank1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; INCF&nbsp;&nbsp;&nbsp; EEADR,F&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; bump address</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">EE_R&nbsp;&nbsp;&nbsp; bank1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; BSF&nbsp;&nbsp;&nbsp; EECON1,RD&nbsp;&nbsp;&nbsp; ; EE Read</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVF&nbsp;&nbsp;&nbsp; EEDATA,W&nbsp;&nbsp;&nbsp; ; W = EEDATA</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bank0</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; RETURN</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#endif</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;--------------------------------------------------------------------</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">AVERAGE&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x04&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; AM - use avg BFO freq.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; EE_RD&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Read in one BFO freq</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; copy&nbsp;&nbsp;&nbsp; AccB,AccA&nbsp;&nbsp;&nbsp; ; Into AccA</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x08&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Then second</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; EE_RD&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; into AccB</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; AplusB&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Add 'em</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; Div2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; get average in AccA</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; copy&nbsp;&nbsp;&nbsp; AccA,AccB&nbsp;&nbsp;&nbsp; ; and in AccB</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; return</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;********************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Write EEPROM from "AccB"&nbsp; (AccB must be visible in both</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; W -&gt; memory to write&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; memory banks 0 &amp; 1)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;********************************************************************&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#ifdef&nbsp;&nbsp;&nbsp; F84</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">EE_WR&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; EEADR&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Address to write</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVF&nbsp;&nbsp;&nbsp; AccB+0,W&nbsp;&nbsp;&nbsp; ; Data byte #0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; EE_W</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVF&nbsp;&nbsp;&nbsp; AccB+1,W&nbsp;&nbsp;&nbsp; ; Data byte #1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; EE_Winc</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVF&nbsp;&nbsp;&nbsp; AccB+2,W&nbsp;&nbsp;&nbsp; ; Data byte #2</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; EE_Winc</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVF&nbsp;&nbsp;&nbsp; AccB+3,W&nbsp;&nbsp;&nbsp; ; Data byte #3</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; EE_Winc</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; RETURN</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">EE_Winc&nbsp;&nbsp;&nbsp; INCF&nbsp;&nbsp;&nbsp; EEADR,F&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; bump address</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">EE_W&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; EEDATA</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bank1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; BSF&nbsp;&nbsp;&nbsp; EECON1,WREN&nbsp;&nbsp;&nbsp; ; Enable Write</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0x55&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; EECON2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Write 0x55</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0xAA&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; EECON2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Write 0xAA</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; BSF&nbsp;&nbsp;&nbsp; EECON1,WR&nbsp;&nbsp;&nbsp; ; Set WR bit (begin write)</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">EE_W2&nbsp;&nbsp;&nbsp; BTFSC&nbsp;&nbsp;&nbsp; EECON1,WR&nbsp;&nbsp;&nbsp; ; Wait for write to finish</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; GOTO&nbsp;&nbsp;&nbsp; EE_W2</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; BCF&nbsp;&nbsp;&nbsp; EECON1,EEIF&nbsp;&nbsp;&nbsp; ; clear interrupts</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bank0</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; RETURN&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#endif</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;--------------------------------------------------------------------</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#ifdef&nbsp;&nbsp;&nbsp; F628</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">EE_WR&nbsp;&nbsp;&nbsp; bank1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; EEADR&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Address to write</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVF&nbsp;&nbsp;&nbsp; AccB+0,W&nbsp;&nbsp;&nbsp; ; Data byte #0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; EE_W</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVF&nbsp;&nbsp;&nbsp; AccB+1,W&nbsp;&nbsp;&nbsp; ; Data byte #1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; EE_Winc</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVF&nbsp;&nbsp;&nbsp; AccB+2,W&nbsp;&nbsp;&nbsp; ; Data byte #2</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; EE_Winc</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVF&nbsp;&nbsp;&nbsp; AccB+3,W&nbsp;&nbsp;&nbsp; ; Data byte #3</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; CALL&nbsp;&nbsp;&nbsp; EE_Winc</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bank0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; RETURN</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; errorlevel&nbsp;&nbsp;&nbsp; -302&nbsp;&nbsp;&nbsp; ; In Bank 2</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">EE_Winc&nbsp;&nbsp;&nbsp; INCF&nbsp;&nbsp;&nbsp; EEADR,F&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; bump address</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">EE_W&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; EEDATA</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; BSF&nbsp;&nbsp;&nbsp; EECON1,WREN&nbsp;&nbsp;&nbsp; ; Enable Write</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0x55&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; EECON2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Write 0x55</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVLW&nbsp;&nbsp;&nbsp; 0xAA&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; EECON2&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Write 0xAA</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; BSF&nbsp;&nbsp;&nbsp; EECON1,WR&nbsp;&nbsp;&nbsp; ; Set WR bit (begin write)</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">EE_W2&nbsp;&nbsp;&nbsp; BTFSC&nbsp;&nbsp;&nbsp; EECON1,WR&nbsp;&nbsp;&nbsp; ; Wait for write to finish</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; GOTO&nbsp;&nbsp;&nbsp; EE_W2</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bank0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; BCF&nbsp;&nbsp;&nbsp; PIR1,EEIF&nbsp;&nbsp;&nbsp; ; clear interrupts</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bank1</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; RETURN&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; errorlevel&nbsp;&nbsp;&nbsp; +302</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">#endif</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;********************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Testing counter </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;********************************************************************&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">ctest&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0xfe&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; MS byte of loop count</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; COUNT3&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Counted upward till it overflows</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x1d</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; COUNT2</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0xc0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; COUNT1</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">cloop&nbsp;&nbsp;&nbsp; bcf&nbsp;&nbsp;&nbsp; PUFF&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Toggle counter input once</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bsf&nbsp;&nbsp;&nbsp; PUFF</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incfsz&nbsp;&nbsp;&nbsp; COUNT1,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; cloop</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incfsz&nbsp;&nbsp;&nbsp; COUNT2,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; cloop</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incfsz&nbsp;&nbsp;&nbsp; COUNT3,f</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; cloop</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; return</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;***********************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Debugging Memory &amp; Register dump</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">debug</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; D_Wtemp&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Copy W to temp register,</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; SWAPF&nbsp;&nbsp;&nbsp; STATUS,W&nbsp;&nbsp;&nbsp; ; Swap status to be saved into W</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; D_Stemp&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Save status to D_Stemp register</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; FSR,W&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Save FSR</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; D_FSR</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x57&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; W=</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; putchr</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x3d</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; putchr</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; D_Wtemp,w</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; hex_2</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x20&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; 2 spaces, just to be neat</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; putchr</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x20</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; putchr</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x53&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; SR=</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; putchr</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x52</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; putchr</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x3d</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; putchr</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; D_Stemp,w</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; hex_2</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; crlf&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Serial</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; clrf&nbsp;&nbsp;&nbsp; FSR&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Ready for memory dump</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">D_loop&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; 0,W&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Read indirect</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; hex_2</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x20</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; putchr</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; incf&nbsp;&nbsp;&nbsp; FSR,f&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; to next byte</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; FSR,w&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; end of line?</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; andlw&nbsp;&nbsp;&nbsp; 0x0F</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bne&nbsp;&nbsp;&nbsp; next_ln</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; crlf</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bra&nbsp;&nbsp;&nbsp; chk4end</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">next_ln&nbsp;&nbsp;&nbsp; andlw&nbsp;&nbsp;&nbsp; 0x03&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Groups of 4</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bne&nbsp;&nbsp;&nbsp; chk4end</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x20</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; putchr</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">chk4end&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; FSR,w&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; All done?</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; xorlw&nbsp;&nbsp;&nbsp; 0x80</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bne&nbsp;&nbsp;&nbsp; D_loop</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; crlf</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; crlf</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; D_FSR,W&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Restore FSR</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; FSR</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; SWAPF&nbsp;&nbsp;&nbsp; D_Stemp,W&nbsp;&nbsp;&nbsp; ; Swap nibbles in D_Stemp register</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; and place result into W</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; MOVWF&nbsp;&nbsp;&nbsp; STATUS&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Move W into STATUS register</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; (sets bank to original state)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; SWAPF&nbsp;&nbsp;&nbsp; D_Wtemp,F&nbsp;&nbsp;&nbsp; ; Swap nibbles in D_Wtemp and place result in D_Wtemp</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; SWAPF&nbsp;&nbsp;&nbsp; D_Wtemp,W&nbsp;&nbsp;&nbsp; ; Swap nibbles in D_Wtemp and place result into W</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; return</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;***********************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Print CRLF to serial</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">crlf&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x0d&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; CRLF</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; putchr</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x0a</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; putchr</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;***********************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Print W as 2 Hex digits</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">hex_2&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; D_hex</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; swapf&nbsp;&nbsp;&nbsp; D_hex,w&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Get big bit</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; call&nbsp;&nbsp;&nbsp; hex_3</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movf&nbsp;&nbsp;&nbsp; D_hex,w&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Get little bit</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">hex_3&nbsp;&nbsp;&nbsp; andlw&nbsp;&nbsp;&nbsp; 0x0f&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; keep bottom 4 bits</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; addlw&nbsp;&nbsp;&nbsp; 0xF6</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bcc&nbsp;&nbsp;&nbsp; hex_4</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; addlw&nbsp;&nbsp;&nbsp; 0x07&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; binary A -&gt; ASCII A</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">hex_4&nbsp;&nbsp;&nbsp; addlw&nbsp;&nbsp;&nbsp; 0x3A&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; binary 0 -&gt; ASCII 0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; putchr</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Output Routines for PIC16F84</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Clock is 4.0 MHz.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; ie. 1.0 us per cycle = 4/Fosc.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; 9600 Baud&nbsp; = 104.17 us</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 104.17&nbsp;&nbsp; CPU cycles</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;********************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Output the character in W. Assumes Mac is ready.</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Uses W</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">putchr&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; S_Wtemp&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Character being output</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0x08&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Bit count</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movwf&nbsp;&nbsp;&nbsp; S_count</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bcf&nbsp;&nbsp;&nbsp; S_out&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Send a 0 - Start bit</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">put_clp&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0xE7&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Delay "104" cycles</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">txd_0&nbsp;&nbsp;&nbsp; addlw&nbsp;&nbsp;&nbsp; 0x01</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bne&nbsp;&nbsp;&nbsp; txd_0</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; rrf&nbsp;&nbsp;&nbsp; S_Wtemp,f&nbsp;&nbsp;&nbsp; ; Transmit a bit</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bcs&nbsp;&nbsp;&nbsp; t_0</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bcf&nbsp;&nbsp;&nbsp; S_out&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Send a 0</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bra&nbsp;&nbsp;&nbsp; tx_1</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">t_0&nbsp;&nbsp;&nbsp; bsf&nbsp;&nbsp;&nbsp; S_out&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Send a 1</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">tx_1&nbsp;&nbsp;&nbsp; decfsz&nbsp;&nbsp;&nbsp; S_count,f&nbsp;&nbsp;&nbsp; ; Done all bits?</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; goto&nbsp;&nbsp;&nbsp; put_clp</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0xE7&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Delay for last data</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">txd_1&nbsp;&nbsp;&nbsp; addlw&nbsp;&nbsp;&nbsp; 0x01</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bne&nbsp;&nbsp;&nbsp; txd_1</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bsf&nbsp;&nbsp;&nbsp; S_out&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; Transmit two stop bit</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; movlw&nbsp;&nbsp;&nbsp; 0xCD</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">txd_9&nbsp;&nbsp;&nbsp; addlw&nbsp;&nbsp;&nbsp; 0x01</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; bne&nbsp;&nbsp;&nbsp; txd_9</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp; return</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;********************************************************************</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;&nbsp;&nbsp;&nbsp; Tail End Charlie</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">;********************************************************************&nbsp;&nbsp;&nbsp; </span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">; initialize eeprom locations</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ORG 0x2100</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DE&nbsp; 0x00, 0x00, 0x00, 0x00&nbsp;&nbsp;&nbsp; ; Unused (reserved for later)</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DE&nbsp; 0x00, 0x00, 0x00, 0x00&nbsp;&nbsp;&nbsp; ; IF Offset 1 Low&nbsp; BFO ????</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DE&nbsp; 0x00, 0x00, 0x00, 0x00&nbsp;&nbsp;&nbsp; ; IF Offset 2 High BFO ????</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 DE&nbsp; 0x00, 0x00, 0x00, 0x00&nbsp;&nbsp;&nbsp; ; IF Offset 3 
No&nbsp;&nbsp; BFO -AM-</span><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DE&nbsp; 0xfd, 0xff, 0xc4, 0x00&nbsp;&nbsp;&nbsp; ; 4.000 MHz initial calibration</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"><span style="font-family:courier new,monospace">&nbsp;&nbsp;&nbsp;&nbsp; END</span><br style="font-family:courier new,monospace"><br style="font-family:courier new,monospace"></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div id="sites-attachments-container">
</div>
</div>
</div> 
</td> 
</tr>
</tbody></table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?continue=https://sites.google.com/site/vk3bhr/home/fm2/source&amp;service=jotspot">Войти</a><span aria-hidden="true">|</span><a class="sites-system-link" href="https://sites.google.com/site/vk3bhr/system/app/pages/recentChanges">Последняя активность сайта</a><span aria-hidden="true">|</span><a class="sites-system-link" href="https://sites.google.com/site/vk3bhr/system/app/pages/reportAbuse" target="_blank">Пожаловаться</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Печать страницы</a><span aria-hidden="true">|</span><span class="sites-system-link">На основе</span> <b class="powered-by"><a href="http://sites.google.com/">Google&nbsp;Сайтов</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="source%20-%20VK3BHR_files/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">if (webspace.editorResources['text']) {webspace.editorResources['text'].unshift('\/site\/vk3bhr\/system\/app\/css\/overlay.css?cb\x3diceberg4a100%25150goog-ws-nonenone');webspace.editorResources['text'].unshift('\/site\/vk3bhr\/_\/rsrc\/1519148186000\/system\/app\/themes\/iceberg\/standard-css-iceberg-ltr-ltr.css');}</script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("2bd", "Navigation", true);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_2bd');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
        JOT_insertTranslateCode('ru', 'en');
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="source%20-%20VK3BHR_files/translate_24dp.png" alt="Google Переводчик" width="20" height="20"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">Исходный текст</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">Предложить лучший вариант перевода</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div>


<div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div><div style="box-sizing: content-box; width: 103px; height: 24px;" id=":0.floatContainer" class=" goog-te-ftab-float"><iframe id=":0.container" src="javascript:''" class="goog-te-ftab-frame skiptranslate" style="visibility: visible; box-sizing: content-box; width: 103px; height: 24px;" frameborder="0"></iframe></div></body></html>